{"version":3,"file":"module.js","sourceRoot":"/","sources":["module/module.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iEAA4D;AAE5D,EAAE;AACF,OAAO;AACP,EAAE;AACF,SAAsB,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI;;;;;;oBACnC,KAAkB,GAAG,CAAC,IAAI,EAAxB,KAAK,WAAA,EAAE,IAAI,UAAA,CAAc;oBAEf,qBAAM,iCAAa,CAAC,OAAO,CAAC;4BAC5C,KAAK,EAAE,KAAK;yBACb,CAAC,EAAA;;oBAFI,SAAS,GAAG,SAEhB;yBAEE,SAAS,EAAT,wBAAS;oBACL,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;oBACrC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;wBACnB,KAAK,OAAA;wBACL,IAAI,MAAA;wBACJ,KAAK,OAAA;qBACN,CAAC,CAAC;;wBAEiB,qBAAM,IAAI,iCAAa,CAAC;wBAC1C,KAAK,OAAA;wBACL,IAAI,MAAA;qBACL,CAAC;yBACC,IAAI,EAAE;yBACN,IAAI,CAAC,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,EAAE,EAAP,CAAO,CAAC,EAAA;;oBALpB,WAAW,GAAG,SAKM;oBAEpB,KAAK,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;oBACpC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,OAAA,EAAE,IAAI,MAAA,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC;;;;;;CAEhD;AAzBD,wBAyBC;AAED,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC","sourcesContent":["import { PortfolioUser } from \"../schema/appUser_schema.js\";\n\n//\n/// 로그인\n//\nexport async function signIn(req, res, next) {\n  const { email, name } = req.body;\n\n  const foundUser = await PortfolioUser.findOne({\n    email: email,\n  });\n\n  if (foundUser) {\n    const token = jwtToken(foundUser.id);\n    res.status(200).json({\n      email,\n      name,\n      token,\n    });\n  } else {\n    const createdUser = await new PortfolioUser({\n      email,\n      name,\n    })\n      .save()\n      .then((data) => data.id);\n\n    const token = jwtToken(createdUser);\n    res.status(201).json({ email, name, token });\n  }\n}\n\nconsole.log(\"npm run dev\");\n"]}